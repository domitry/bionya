/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

!function(t,e){var n=e();"undefined"!=typeof define&&define.amd&&define(n),t.Bionya=n}(this,function(){var t,e,n;return function(r){function i(t,e){return v.call(t,e)}function a(t,e){var n,r,i,a,o,s,u,l,c,d,p,f=e&&e.split("/"),h=m.map,g=h&&h["*"]||{};if(t&&"."===t.charAt(0))if(e){for(f=f.slice(0,f.length-1),t=t.split("/"),o=t.length-1,m.nodeIdCompat&&k.test(t[o])&&(t[o]=t[o].replace(k,"")),t=f.concat(t),c=0;c<t.length;c+=1)if(p=t[c],"."===p)t.splice(c,1),c-=1;else if(".."===p){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||g)&&h){for(n=t.split("/"),c=n.length;c>0;c-=1){if(r=n.slice(0,c).join("/"),f)for(d=f.length;d>0;d-=1)if(i=h[f.slice(0,d).join("/")],i&&(i=i[r])){a=i,s=c;break}if(a)break;!u&&g&&g[r]&&(u=g[r],l=c)}!a&&u&&(a=u,s=l),a&&(n.splice(0,s,a),t=n.join("/"))}return t}function o(t,e){return function(){return f.apply(r,b.call(arguments,0).concat([t,e]))}}function s(t){return function(e){return a(e,t)}}function u(t){return function(e){_[t]=e}}function l(t){if(i(x,t)){var e=x[t];delete x[t],y[t]=!0,p.apply(r,e)}if(!i(_,t)&&!i(y,t))throw new Error("No "+t);return _[t]}function c(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function d(t){return function(){return m&&m.config&&m.config[t]||{}}}var p,f,h,g,_={},x={},m={},y={},v=Object.prototype.hasOwnProperty,b=[].slice,k=/\.js$/;h=function(t,e){var n,r=c(t),i=r[0];return t=r[1],i&&(i=a(i,e),n=l(i)),i?t=n&&n.normalize?n.normalize(t,s(e)):a(t,e):(t=a(t,e),r=c(t),i=r[0],t=r[1],i&&(n=l(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:n}},g={require:function(t){return o(t)},exports:function(t){var e=_[t];return"undefined"!=typeof e?e:_[t]={}},module:function(t){return{id:t,uri:"",exports:_[t],config:d(t)}}},p=function(t,e,n,a){var s,c,d,p,f,m,v=[],b=typeof n;if(a=a||t,"undefined"===b||"function"===b){for(e=!e.length&&n.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if(p=h(e[f],a),c=p.f,"require"===c)v[f]=g.require(t);else if("exports"===c)v[f]=g.exports(t),m=!0;else if("module"===c)s=v[f]=g.module(t);else if(i(_,c)||i(x,c)||i(y,c))v[f]=l(c);else{if(!p.p)throw new Error(t+" missing "+c);p.p.load(p.n,o(a,!0),u(c),{}),v[f]=_[c]}d=n?n.apply(_[t],v):void 0,t&&(s&&s.exports!==r&&s.exports!==_[t]?_[t]=s.exports:d===r&&m||(_[t]=d))}else t&&(_[t]=n)},t=e=f=function(t,e,n,i,a){if("string"==typeof t)return g[t]?g[t](e):l(h(t,e).f);if(!t.splice){if(m=t,m.deps&&f(m.deps,m.callback),!e)return;e.splice?(t=e,e=n,n=null):t=r}return e=e||function(){},"function"==typeof n&&(n=i,i=a),i?p(r,t,e,n):setTimeout(function(){p(r,t,e,n)},4),f},f.config=function(t){return f(t)},t._defined=_,n=function(t,e,n){e.splice||(n=e,e=[]),i(_,t)||i(x,t)||(x[t]=[t,e,n])},n.amd={jQuery:!0}}(),n("contrib/almond/almond",function(){}),n("tools",[],function(){var t={STL:Nyaplot.STL,_:Nyaplot._,uuid:Nyaplot.uuid,Manager:Nyaplot.Manager};return t}),n("components/scale",["tools"],function(t){function e(t,e){var n=Math.abs(e.x[1]-e.x[0]),r=Math.abs(e.y[1]-e.y[0]);return this.scales={},this.center={x:n/2,y:r/2},this.max_r=Math.min(n,r)/2,this}var n=t._;return e.prototype.init=function(t,e,n,r){this.inner_radius=t,this.outer_radius=e,this.inner_num=n,this.outer_num=r,this.inner_thickness=t/(n+1),this.outer_thickness=(this.max_r-e)/r},e.prototype.addGroup=function(t,e,n,r){var i=d3.scale.ordinal().domain(e).rangePoints([n,r],1);this.scales[t]=i,this.width=(r-n)/(e.length+1)},e.prototype.groups=function(){return n.keys(this.scales)},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(t){return t>=0?this.outer_thickness:this.inner_thickness},e.prototype.getCenter=function(){return this.center},e.prototype.getRange=function(t){var e,n;return t>0?(e=this.outer_radius+this.outer_thickness*(t-1),n=e+this.outer_thickness):(n=this.inner_radius,e=n-this.inner_thickness),[e,n]},e.prototype.get=function(t,e,n){var r,i;return r=t>0?this.outer_radius+this.outer_thickness*t:this.inner_radius-this.inner_thickness*t*-1,i=this.scales[e](n),{x:r*Math.cos(i),y:r*Math.sin(i),r:r,theta:i}},e}),n("components/axis",["tools"],function(t){function e(e,n,r){var i=t._,a=t.Manager,o={width:0,height:0,margin:{top:0,bottom:0,left:0,right:0},x_label:"X",y_label:"Y",zoom:!0,zoom_range:[.5,5],rotate_x_label:0,rotate_y_label:0,pane_uuid:null,z_index:0,color:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(241,226,204)","rgb(204,204,204)"],extra:{}},s={df_id:null,inner_radius:150,outer_radius:170,group_by:null,axis:null,chord:!1,matrix:null,inner_num:0,outer_num:1};arguments.length>2&&(i.extend(o,r),i.extend(s,r.extra),o.extra=s);var u=a.getData(o.extra.df_id),l=u.column(o.extra.group_by),c={},d=o.extra.chord?o.extra.matrix:[],p=d3.scale.ordinal().range(o.color);i.each(l,function(t,e){var n=u.nested_column(e,o.extra.axis);if(c[t]=n,null==o.extra.matrix){d[e]=[];for(var r=0;r<l.length;r++)d[e][r]=r==e?n.length:0}});var f=d3.layout.chord().padding(.05).matrix(d),h=e.append("g").attr("transform","translate("+o.width/2+","+o.height/2+")");h.append("g").selectAll("g").data(f.groups).enter().append("g").attr("class","group_arcs").append("path").style("fill",function(t){return p(t.index)}).style("stroke",function(t){return p(t.index)}).attr("d",d3.svg.arc().innerRadius(o.extra.inner_radius).outerRadius(o.extra.outer_radius)).attr("id",function(t,e){return"group"+e}),h.selectAll(".group_arcs").append("text").attr("x",6).attr("dy",15).append("textPath").attr("xlink:href",function(t,e){return"#group"+e}).text(function(t,e){return l[e]}),o.extra.chord&&h.append("g").selectAll("path").data(f.chords).enter().append("path").attr("d",d3.svg.chord().radius(o.extra.inner_radius)).style("fill","#fff"),n.init(o.extra.inner_radius,o.extra.outer_radius,o.extra.inner_num,o.extra.outer_num),h.selectAll(".group_arcs").each(function(t,e){n.addGroup(l[e],c[l[e]],t.startAngle,t.endAngle)});var g=i.flatten(i.map(c,function(t,e){return i.map(t,function(t){return n.get(0,e,t)})}));h.append("g").attr("class","ticks").selectAll("g").data(g).enter().append("g").attr("transform",function(t){return"rotate("+180*(t.theta/Math.PI)+") translate(0,"+-1*o.extra.outer_radius+")"}).append("line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",-5).attr("stroke","#000"),o.zoom&&e.call(d3.behavior.zoom().scaleExtent(o.zoom_range).on("zoom",function(){e.attr("transform","translate("+d3.event.translate+") scale("+d3.event.scale+")")}))}return e}),n("diagrams/arc",["tools"],function(t){function e(t,e,i,a){var o={range:[0,0],width:.5,color:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)","rgb(227,26,28)","rgb(253,191,111)","rgb(255,127,0)","rgb(202,178,214)"],fill_by:null,x:null,y:null,layer:1,axis:!0};return arguments.length>3&&n.extend(o,a),this.height_scale=function(){var t=e.getHeight(o.layer);return d3.scale.linear().domain(o.range).range([0,t])}(),this.inner_radius=e.getRange(o.layer)[0],this.model=function(){var n=e.getCenter();return t.append("g").attr("transform","translate("+n.x+","+n.y+")")}(),this.scales=e,this.df=r.getData(i),this.color_scale=d3.scale.ordinal().range(o.color),this.uuid=o.uuid,this.options=o,this}var n=t._,r=t.Manager;return e.prototype.update=function(){var t=this.scales.groups(),e=this;this.options.axis&&!function(){var t=e.height_scale.ticks(5);t.reverse().pop();var n=e.model.append("g").selectAll("g").data(t).enter().append("g");n.append("circle").attr("fill","none").attr("stroke","#000").attr("r",function(t){return e.inner_radius+e.height_scale(t)}),n.append("text").attr("y",function(t){return-1*(e.inner_radius+e.height_scale(t)+4)}).text(function(t){return t})}(),n.each(t,function(t,n){var r=e.df.nested_column(n,e.options.x),i=e.df.nested_column(n,e.options.y),a=e.processData(t,r,i);e.updateModels(a)})},e.prototype.processData=function(t,e,r){var i=this;return n.map(e,function(e,n){var a=i.scales.get(i.options.layer,t,e);return a.height=i.height_scale(r[n]),a})},e.prototype.updateModels=function(t){var e=this.inner_radius,n=this.scales.getWidth()*this.options.width,r=this.color_scale;this.model.append("g").selectAll("path").data(t).enter().append("path").attr("d",d3.svg.arc().startAngle(function(t){return t.theta-n/2}).endAngle(function(t){return t.theta+n/2}).innerRadius(e).outerRadius(function(t){return e+t.height})).attr("stroke",function(t,e){return r(e)}).attr("fill",function(t,e){return r(e)})},e.prototype.getLegend=function(){},e.prototype.checkSelectedData=function(){},e}),n("main",["require","exports","module","components/scale","components/axis","diagrams/arc"],function(t){var e={};return e.Nya={scale:t("components/scale"),axis:t("components/axis"),diagrams:{arc:t("diagrams/arc")}},e}),e("main")});